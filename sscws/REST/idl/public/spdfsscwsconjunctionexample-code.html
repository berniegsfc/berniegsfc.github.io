<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.4 on Fri Aug  1 08:37:15 2025 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>spdfsscwsconjunctionexample.pro (SSC R2.4.14 Web Services API)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="spdfsscwsconjunctionexample.pro (SSC R2.4.14 Web Services API)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;</span>
<span class="comments">; NOSA HEADER START</span>
<span class="comments">;</span>
<span class="comments">; The contents of this file are subject to the terms of the NASA Open</span>
<span class="comments">; Source Agreement (NOSA), Version 1.3 only (the "Agreement").  You may</span>
<span class="comments">; not use this file except in compliance with the Agreement.</span>
<span class="comments">;</span>
<span class="comments">; You can obtain a copy of the agreement at</span>
<span class="comments">;   docs/NASA_Open_Source_Agreement_1.3.txt</span>
<span class="comments">; or</span>
<span class="comments">;   https://sscweb.gsfc.nasa.gov/WebServices/NASA_Open_Source_Agreement_1.3.txt.</span>
<span class="comments">;</span>
<span class="comments">; See the Agreement for the specific language governing permissions</span>
<span class="comments">; and limitations under the Agreement.</span>
<span class="comments">;</span>
<span class="comments">; When distributing Covered Code, include this NOSA HEADER in each</span>
<span class="comments">; file and include the Agreement file at</span>
<span class="comments">; docs/NASA_Open_Source_Agreement_1.3.txt.  If applicable, add the</span>
<span class="comments">; following below this NOSA HEADER, with the fields enclosed by</span>
<span class="comments">; brackets "[]" replaced with your own identifying information:</span>
<span class="comments">; Portions Copyright [yyyy] [name of copyright owner}</span>
<span class="comments">;</span>
<span class="comments">; NOSA HEADER END</span>
<span class="comments">;</span>
<span class="comments">; Copyright (c) 2021 United States Government as represented by</span>
<span class="comments">; the National Aeronautics and Space Administration. No copyright is</span>
<span class="comments">; claimed in the United States under Title 17, U.S.Code. All Other</span>
<span class="comments">; Rights Reserved.</span>
<span class="comments">;</span>
<span class="comments">;</span>

<span class="comments">;+</span>
<span class="comments">; This program is an example to demonstrate calling the</span>
<span class="comments">; &lt;a href="https://sscweb.gsfc.nasa.gov/">Satellite Situation Center's&lt;/a></span>
<span class="comments">; &lt;a href="https://sscweb.gsfc.nasa.gov/WebServices/REST/"></span>
<span class="comments">; REST Web Services&lt;/a> from an</span>
<span class="comments">; &lt;a href="https://www.l3harrisgeospatial.com/Software-Technology/IDL"></span>
<span class="comments">; L3Harris Interactive Data Language (IDL)&lt;/a> program.  It demonstrates the</span>
<span class="comments">; following:</span>
<span class="comments">;   &lt;ul></span>
<span class="comments">;     &lt;li>Using the IDL/Python bridge to find magnetic field line</span>
<span class="comments">;         conjunctions using the Python </span>
<span class="comments">;         &lt;a href="https://pypi.org/project/sscws/">sscws library&lt;/a>.</span>
<span class="comments">;         The python sscws library is used because, at this time, the IDL</span>
<span class="comments">;         &lt;a href="https://sscweb.gsfc.nasa.gov/WebServices/REST/SscIdlLibrary.html"></span>
<span class="comments">;         sscws library&lt;/a> lacks support for conjunction query requests.&lt;/li></span>
<span class="comments">;   &lt;/ul></span>
<span class="comments">; To successfully run this program, you must do the following:</span>
<span class="comments">; &lt;ul></span>
<span class="comments">;   &lt;li>Configure your IDL environment to support the IDL to Python bridge</span>
<span class="comments">;       as described in the IDL documentation.&lt;/li></span>
<span class="comments">;   &lt;li>Configure your Python environment to support the sscws library.  That</span>
<span class="comments">;       is, &lt;code>$ pip install sscws&lt;/code>.&lt;/li></span>
<span class="comments">; &lt;/ul></span>
<span class="comments">;</span>
<span class="comments">; @copyright Copyright (c) 2021 United States Government as</span>
<span class="comments">;     represented by the National Aeronautics and Space Administration.</span>
<span class="comments">;     No copyright is claimed in the United States under Title 17,</span>
<span class="comments">;     U.S.Code. All Other Rights Reserved.</span>
<span class="comments">;</span>
<span class="comments">; @author B. Harris</span>
<span class="comments">;-</span>



<span class="comments">;+</span>
<span class="comments">; Creates an example conjunction query request.  The object returned is a</span>
<span class="comments">; Python &lt;a href="https://pypi.org/project/sscws/">sscws&lt;/a>.request </span>
<span class="comments">; QueryRequest object for use in the sscws.sscws.get_conjunctions() method.</span>
<span class="comments">; The query is for magnetic field line conjunctions of at least 2 THEMIS</span>
<span class="comments">; satellites with one of 4 THEMIS ground stations duing 2008 doy = 1 - 5.</span>
<span class="comments">;</span>
<span class="comments">; @returns an example Python sscws.request QueryRequest.</span>
<span class="comments">;-</span>
<a id="SpdfGetExampleConjunctionRequest:source"></a>function SpdfGetExampleConjunctionRequest

    compile_opt idl2

    np = Python.Import('numpy')
    cj = Python.Import('sscws.conjunctions')
    co = Python.Import('sscws.coordinates')
    req = Python.Import('sscws.request')
    ti = Python.Import('sscws.timeinterval')
    tr = Python.Import('sscws.tracing')

    sats = Python.Wrap(List($
        cj.Satellite('themisa', tr.BFieldTraceDirection.SAME_HEMISPHERE), $
        cj.Satellite('themisb', tr.BFieldTraceDirection.SAME_HEMISPHERE), $
        cj.Satellite('themisc', tr.BFieldTraceDirection.SAME_HEMISPHERE), $
        cj.Satellite('themisd', tr.BFieldTraceDirection.SAME_HEMISPHERE), $
        cj.Satellite('themise', tr.BFieldTraceDirection.SAME_HEMISPHERE) $
    ))

    satellite_condition = cj.SatelliteCondition(sats, 2)
    box_conjunction_area = cj.BoxConjunctionArea(cj.TraceCoordinateSystem.GEO, 3.0, 10.0)
    ground_stations = Python.Wrap(List($
        cj.GroundStationConjunction('FSMI', 'THM_Fort Smith',$
            co.SurfaceGeographicCoordinates(59.98, -111.84),$
            box_conjunction_area),$
        cj.GroundStationConjunction('WHIT', 'THM_White Horse',$
            co.SurfaceGeographicCoordinates(61.01, -135.22),$
            box_conjunction_area),$
        cj.GroundStationConjunction('FSIM', 'THM_Fort Simpson',$
            co.SurfaceGeographicCoordinates(61.80, -121.20),$
            box_conjunction_area),$
        cj.GroundStationConjunction('GAK', 'THM_HAARP/Gakona',$
            co.SurfaceGeographicCoordinates(62.40, -145.20),$
            box_conjunction_area)$
    ))
    ground_station_condition = $
        cj.GroundStationCondition(ground_stations,$
            cj.TraceCoordinateSystem.GEO, tr.TraceType.B_FIELD)

    conditions = Python.Wrap(List(satellite_condition, ground_station_condition))

    query_request = $
        req.QueryRequest('Magnetic conjunction of at least 2 THEMIS satellites with one of 4',$
            ti.TimeInterval('2008-01-05T10:00:00Z', '2008-01-05T11:59:59Z'),$
            cj.ConditionOperator.ALL, conditions)

    return, query_request
end


<span class="comments">;+</span>
<span class="comments">; Prints a Python Dict representation of a QueryResult as defined in</span>
<span class="comments">; &lt;a href="https://sscweb.gsfc.nasa.gov/WebServices/REST/SSC.xsd"></span>
<span class="comments">; SSC.xsd&lt;/a>.</span>
<span class="comments">;</span>
<span class="comments">; @param result {in} {type=hash}</span>
<span class="comments">;            QueryResult to print.</span>
<span class="comments">;-</span>
<a id="SpdfPrintConjunctionResult:source"></a>pro SpdfPrintConjunctionResult, result
    compile_opt idl2
    foreach conjunction, result['Conjunction'] do begin

        print, (conjunction['TimeInterval'])['Start'].isoformat(), ' to ', $
               (conjunction['TimeInterval'])['End'].isoformat()
        print, 'Satellite', 'Lat', 'Lon', 'Radius', 'Ground Station', $
               'Lat', 'Lon', 'ArcLen', $
            format='%10s %7s %7s %9s %20s %7s %7s %9s'

        foreach sat, conjunction['SatelliteDescription'] do begin

            foreach description, sat['Description'] do begin

                trace = description['TraceDescription']
                print, sat['Satellite'], $
                       (description['Location'])['Latitude'], $
                       (description['Location'])['Longitude'], $
                       (description['Location'])['Radius'], $
                       (trace['Target'])['GroundStation'], $
                       (trace['Location'])['Latitude'], $
                       (trace['Location'])['Longitude'], $
                       trace['ArcLength'], $
                    format='%10s %7.2f %7.2f %9.2f %20s %7.2f %7.2f %9.2f'
            endforeach
        endforeach
    endforeach
end


<span class="comments">;+</span>
<span class="comments">; This procedure is an example to demonstrate calling the SSC REST Web </span>
<span class="comments">; Services from an IDL program.  It demonstrates the following:</span>
<span class="comments">;   &lt;ul></span>
<span class="comments">;     &lt;li>Using the IDL/Python bridge to find magnetic field line</span>
<span class="comments">;         conjunctions using the Python </span>
<span class="comments">;         &lt;a href="https://pypi.org/project/sscws/">sscws library&lt;/a>.</span>
<span class="comments">;         The python sscws library is used because, at this time, the IDL</span>
<span class="comments">;         &lt;a href="https://sscweb.gsfc.nasa.gov/WebServices/REST/SscIdlLibrary.html"></span>
<span class="comments">;         sscws library&lt;/a> lacks support for conjunction query requests.&lt;/li></span>
<span class="comments">;   &lt;/ul></span>
<span class="comments">;-</span>
<a id="SpdfSscWsConjunctionExample:source"></a>pro SpdfSscWsConjunctionExample
    compile_opt idl2

    sscws = Python.Import('sscws.sscws')

    ssc = sscws.SscWs()

    <span class="comments">;observatories = ssc.get_observatories()</span>
    <span class="comments">;foreach observatory,observatories['Observatory'] do print, observatory['Name']</span>

    result = ssc.get_conjunctions(SpdfGetExampleConjunctionRequest())

    SpdfPrintConjunctionResult, result
end

</code>
    </div>
  </body>
</html>