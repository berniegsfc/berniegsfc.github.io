<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.4 on Fri Aug  1 08:37:15 2025 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>spdfsscwsexample.pro (SSC R2.4.14 Web Services API)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="spdfsscwsexample.pro (SSC R2.4.14 Web Services API)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;</span>
<span class="comments">; NOSA HEADER START</span>
<span class="comments">;</span>
<span class="comments">; The contents of this file are subject to the terms of the NASA Open </span>
<span class="comments">; Source Agreement (NOSA), Version 1.3 only (the "Agreement").  You may </span>
<span class="comments">; not use this file except in compliance with the Agreement.</span>
<span class="comments">;</span>
<span class="comments">; You can obtain a copy of the agreement at</span>
<span class="comments">;   docs/NASA_Open_Source_Agreement_1.3.txt</span>
<span class="comments">; or </span>
<span class="comments">;   https://sscweb.gsfc.nasa.gov/WebServices/NASA_Open_Source_Agreement_1.3.txt.</span>
<span class="comments">;</span>
<span class="comments">; See the Agreement for the specific language governing permissions</span>
<span class="comments">; and limitations under the Agreement.</span>
<span class="comments">;</span>
<span class="comments">; When distributing Covered Code, include this NOSA HEADER in each</span>
<span class="comments">; file and include the Agreement file at </span>
<span class="comments">; docs/NASA_Open_Source_Agreement_1.3.txt.  If applicable, add the </span>
<span class="comments">; following below this NOSA HEADER, with the fields enclosed by </span>
<span class="comments">; brackets "[]" replaced with your own identifying information: </span>
<span class="comments">; Portions Copyright [yyyy] [name of copyright owner]</span>
<span class="comments">;</span>
<span class="comments">; NOSA HEADER END</span>
<span class="comments">;</span>
<span class="comments">; Copyright (c) 2013-2024 United States Government as represented by </span>
<span class="comments">; the National Aeronautics and Space Administration. No copyright is </span>
<span class="comments">; claimed in the United States under Title 17, U.S.Code. All Other </span>
<span class="comments">; Rights Reserved.</span>
<span class="comments">;</span>
<span class="comments">;</span>


<span class="comments">;+</span>
<span class="comments">; This program is an example to demonstrate calling the</span>
<span class="comments">; &lt;a href="https://sscweb.gsfc.nasa.gov/">Satellite Situation Center's&lt;/a></span>
<span class="comments">; &lt;a href="https://sscweb.gsfc.nasa.gov/WebServices/REST/"></span>
<span class="comments">; REST Web Services&lt;/a> from an </span>
<span class="comments">; &lt;a href="http://www.harrisgeospatial.com/">Exelis Visual Information </span>
<span class="comments">; Solutions&lt;/a></span>
<span class="comments">; (VIS) Interactive Data Language (IDL) program.  It demonstrates the </span>
<span class="comments">; following:</span>
<span class="comments">;   &lt;ul></span>
<span class="comments">;     &lt;li>Getting the available observatories.&lt;/li></span>
<span class="comments">;     &lt;li>Getting the available ground stations.&lt;/li></span>
<span class="comments">;     &lt;li>Getting and displaying satellite location data.&lt;/li></span>
<span class="comments">;     &lt;li>Some basic HTTP error handling.&lt;/li></span>
<span class="comments">;   &lt;/ul></span>
<span class="comments">;</span>
<span class="comments">; @copyright Copyright (c) 2013-2024 United States Government as </span>
<span class="comments">;     represented by the National Aeronautics and Space Administration.</span>
<span class="comments">;     No copyright is claimed in the United States under Title 17,</span>
<span class="comments">;     U.S.Code. All Other Rights Reserved.</span>
<span class="comments">;</span>
<span class="comments">; @author B. Harris</span>
<span class="comments">;-</span>



<span class="comments">;+</span>
<span class="comments">; Prints an SpdfSscDataResult object.</span>
<span class="comments">;</span>
<span class="comments">; @private</span>
<span class="comments">; @param dataResult {in} {type=SpdfSscDataResult}</span>
<span class="comments">;            DataResult to print.</span>
<span class="comments">;-</span>
<a id="SpdfPrintDataResult:source"></a>pro SpdfPrintDataResult, $
    dataResult
    compile_opt idl2

    data = dataResult->getData()

    if ~obj_valid(data[0]) then begin

        print, 'No data returned'
        print, 'status: ', statusCode
        subCode = locations->getStatusSubCode()
        print, 'statusSubCode: ', subCode
        statusText = locations->getStatusText()
        print, 'statusText: ', statusText

        return
    endif

    for i = 0, n_elements(data) - 1 do begin
    
        id = data[i]->getId()
        print, "Satellite: ", id

        time = data[i]->getTime()
        coordData = data[i]->getCoordinateData()
        coordinateSystem = coordData->getCoordinateSystem()
        x = coordData->getX()
        y = coordData->getY()
        z = coordData->getZ()
        lat = coordData->getLatitude()
        lon = coordData->getLongitude()
        localTime = coordData->getLocalTime()

        bTraceData = data[i]->getBTraceData()
        radialLength = data[i]->getRadialLength()
        magneticStrength = data[i]->getMagneticStrength()
        bGseX = data[i]->getBGseX()
        bGseY = data[i]->getBGseY()
        bGseZ = data[i]->getBGseZ()
        neutralSheetDistance = data[i]->getNeutralSheetDistance()
        bowshockDistance = data[i]->getBowShockDistance()
        magnetoPauseDistance = data[i]->getMagnetoPauseDistance()
        dipoleLValue = data[i]->getDipoleLValue()
        dipoleInvariantLatitude = data[i]->getDipoleInvariantLatitude()
        spacecraftRegions = data[i]->getSpacecraftRegion()
        radialTracedFootpointRegions = $
            data[i]->getRadialTracedFootpointRegions()
        northBTracedFootpointRegions = $
            data[i]->getNorthBTracedFootpointRegions()
        southBTracedFootpointRegions = $
            data[i]->getSouthBTracedFootpointRegions()

        print, ''
<span class="comments">;apogee = max(radialLength, apogeeIndex, /NaN, $</span>
<span class="comments">;             min=perigee, subscript_min=perigeeIndex)</span>
<span class="comments">;print, 'Apogee: ', apogeeIndex, bGseX[apogeeIndex], bGseY[apogeeIndex], bGseZ[apogeeIndex], apogee</span>
<span class="comments">;print, 'Perigee: ', perigeeIndex, bGseX[perigeeIndex], bGseY[perigeeIndex], bGseZ[perigeeIndex], perigee</span>
        print, 'Coordinate System: ', strupcase(coordinateSystem)
        print, 'Time                 X               Y              Z'
        for j = 0, n_elements(time) - 1 do begin
 
            caldat, time[j], month, day, year, hour, min, sec

            print, $
                format='(%"%d-%02d-%02dT%02d:%02d:%02dZ %f, %f, %f")', $
                year, month, day, hour, min, sec, x[j], y[j], z[j]
        endfor

        print, ''
        print, 'Coordinate System: ', strupcase(coordinateSystem)
        print, 'Time                 Latitude    Longitude  Local Time'
        for j = 0, n_elements(time) - 1 do begin
 
            caldat, time[j], month, day, year, hour, min, sec

            print, $
                format='(%"%d-%02d-%02dT%02d:%02d:%02dZ %f, %f, %f")', $
                year, month, day, hour, min, sec, lat[j], lon[j], $
                localTime[j]
        endfor

        for k = 0, n_elements(bTraceData) - 1 do begin

            print, ''
            print, 'Magnetic Field Trace Information'
            print, 'Coordinate System: ', $
                       strupcase(bTraceData[k]->getCoordinateSystem())
            print, 'Hemisphere: ', bTraceData[k]->getHemisphere()
            lat = bTraceData[k]->getLatitude()
            lon = bTraceData[k]->getLongitude()
            arcLen = bTraceData[k]->getArcLength()
            print, 'Time                 Latitude    Longitude   Arc Length'
            for j = 0, n_elements(lat) - 1 do begin
 
                caldat, time[j], month, day, year, hour, min, sec

                print, format='(%"%d-%02d-%02dT%02d:%02d:%02dZ  %f  %f  %f")', $
                    year, month, day, hour, min, sec, $
                    lat[j], lon[j], arcLen[j]
            endfor
        endfor

        print, ''
        print, '                                         Footpoint Regions'
        print, '                     Space                       Magnetic Field'
        print, 'Time                 Region         Radial     North       South'
        for j = 0, n_elements(time) - 1 do begin
 
            caldat, time[j], month, day, year, hour, min, sec

            print, format='(%"%d-%02d-%02dT%02d:%02d:%02dZ  %s  %s  %s  %s")', $
                year, month, day, hour, min, sec, $
                spacecraftRegions[j], radialTracedFootpointRegions[j], $
                northBTracedFootpointRegions[j], $
                southBTracedFootpointRegions[j]
        endfor


        print, ''
        print, '                      Radial        Dipole      Invariant '
        print, 'Time                  Length        L Value     Latitude'
        for j = 0, n_elements(time) - 1 do begin
 
            caldat, time[j], month, day, year, hour, min, sec

            print, format='(%"%d-%02d-%02dT%02d:%02d:%02dZ  %e  %e  %e")', $
                year, month, day, hour, min, sec, $
                radialLength[j], $
                dipoleLValue[j], dipoleInvariantLatitude[j]
        endfor


        print, ''
        print, '                            Magnetic Field '
        print, '                                            GSE'
        print, 'Time                  Strength   X           Y          Z
        for j = 0, n_elements(time) - 1 do begin
 
            caldat, time[j], month, day, year, hour, min, sec

            print, format='(%"%d-%02d-%02dT%02d:%02d:%02dZ  %f  %f  %f  %f")', $
                year, month, day, hour, min, sec, $
                magneticStrength[j], bGseX[j], bGseY[j], bGseZ[j]
        endfor

        print, ''
        print, '                               Distances to    '
        print, '                      Neutral                       Magneto'
        print, 'Time                  Sheet          Bowshock       Pause'
        for j = 0, n_elements(time) - 1 do begin
 
            caldat, time[j], month, day, year, hour, min, sec

            print, format='(%"%d-%02d-%02dT%02d:%02d:%02dZ  %e  %e  %e  %e  %e  %e  %e")', $
                year, month, day, hour, min, sec, $
                neutralSheetDistance[j], bowshockDistance[j], $
                magnetoPauseDistance[j]
        endfor

<span class="comments">;        p = plot3d(x, y, z, /overplot, window_title='Orbit')</span>

    endfor
end


<span class="comments">;+</span>
<span class="comments">; Prints an SpdfSssFileResult object and downloads the remote files.</span>
<span class="comments">;</span>
<span class="comments">; @private</span>
<span class="comments">; @param fileResult {in} {type=SpdfSscFileResult}</span>
<span class="comments">;            FileResult to print.</span>
<span class="comments">;-</span>
<a id="SpdfPrintFileResult:source"></a>pro SpdfPrintFileResult, $
    fileResult
    compile_opt idl2

    files = fileResult->getFiles()

    for i = 0, n_elements(files) - 1 do begin

<span class="comments">;        files[i]->print</span>

        localFile = files[i]->getFile()

        print, 'File downloaded to ', localFile
    endfor
end


<span class="comments">;+</span>
<span class="comments">; This procedure is an example to demonstrate calling the SSC REST</span>
<span class="comments">; Web Services from an IDL program.  It demonstrates the following:</span>
<span class="comments">;   &lt;ul></span>
<span class="comments">;     &lt;li>Getting the available observatories.&lt;/li></span>
<span class="comments">;     &lt;li>Getting the available ground stations.&lt;/li></span>
<span class="comments">;     &lt;li>Getting and displaying satellite location data.&lt;/li></span>
<span class="comments">;     &lt;li>Some basic HTTP error handling.&lt;/li></span>
<span class="comments">;   &lt;/ul></span>
<span class="comments">;</span>
<span class="comments">; @keyword endpoint {in} {optional} {type=string}</span>
<span class="comments">;              {default=SpdfSsc->getDefaultEndpoint()}</span>
<span class="comments">;              URL of CDAS web service.</span>
<span class="comments">; @keyword sslVerifyPeer {in} {optional} {type=int}</span>
<span class="comments">;              {default=1}</span>
<span class="comments">;              Specifies whether the authenticity of the peer's SSL</span>
<span class="comments">;              certificate should be verified.  When 0, the connection</span>
<span class="comments">;              succeeds regardless of what the peer SSL certificate</span>
<span class="comments">;              contains.</span>
<span class="comments">;-</span>
<a id="SpdfSscWsExample:source"></a>pro SpdfSscWsExample, $
    endpoint = endpoint, $
    sslVerifyPeer = sslVerifyPeer
    compile_opt idl2

    if n_elements(sslVerifyPeer) eq 0 then begin

        sslVerifyPeer = 1
    endif

    ssc = $
        obj_new('SpdfSsc', $
            endpoint=endpoint, $
            sslVerifyPeer=sslVerifyPeer, $
            userAgent = 'WsExample')

    errReporter = obj_new('SpdfHttpErrorReporter')<span class="comments">;</span>

    observatories = $
        ssc->getObservatories(httpErrorReporter = errReporter)

    print, 'Observatories:'
    for i = 0, n_elements(observatories) - 1 do begin

        id = (observatories[i])->getId()
        name = (observatories[i])->getName()
        spaseId = (observatories[i])->getResourceId()

        print, '  ', id, '  ', name, '  ', spaseId

        spaseGroupIds = (observatories[i])->getGroupIds()

        for j = 0, n_elements(spaseGroupIds) - 1 do begin

            if strlen(spaseGroupIds[j]) gt 0 then begin

                print, '    ', spaseGroupIds[j]
            endif
        endfor
    endfor
    print

    obj_destroy, observatories

    groundStations = $
        ssc->getGroundStations(httpErrorReporter = errReporter)

    print, 'Ground Stations:'
    for i = 0, n_elements(groundStations) - 1 do begin

        location = (groundStations[i])->getLocation()
        latitude = location->getLatitude()
        longitude = location->getLongitude()

        print, '  ', (groundStations[i])->getId(), '  ', $
            (groundStations[i])->getName(), '  ', latitude, $
            '  ', longitude
    endfor
    print

    obj_destroy, groundStations

    timeInterval = $
        obj_new('SpdfTimeInterval', $
            julday(1, 2, 2008, 11, 0, 0), $
            julday(1, 2, 2008, 11, 30, 0))

    sats = objarr(2)

    sats[0] = obj_new('SpdfSatelliteSpecification', 'themisa', 2)
    sats[1] = obj_new('SpdfSatelliteSpecification', 'themisb', 2)

    locationFilter = $
        obj_new('SpdfLocationFilter', $
            minimum = 0b, maximum = 0b, $
            lowerLimit = -36000.0d, upperLimit = -35000.0d)

<span class="comments">;    coordinateOptions = objarr(1)</span>
<span class="comments">;    coordinateOptions[0] = $</span>
<span class="comments">;        obj_new('SpdfFilteredCoordinateOptions', 'Gse', 'X', $</span>
<span class="comments">;                locationFilter)</span>

<span class="comments">;goto, noFilter</span>

    coordinateOptions = objarr(6)
    coordinateOptions[0] = $
        obj_new('SpdfCoordinateOptions', 'Gse', 'X')
    coordinateOptions[1] = $
        obj_new('SpdfCoordinateOptions', 'Gse', 'Y')
    coordinateOptions[2] = $
        obj_new('SpdfCoordinateOptions', 'Gse', 'Z')
    coordinateOptions[3] = $
        obj_new('SpdfCoordinateOptions', 'Gse', 'Lat')
    coordinateOptions[4] = $
        obj_new('SpdfCoordinateOptions', 'Gse', 'Lon')
    coordinateOptions[5] = $
        obj_new('SpdfCoordinateOptions', 'Gse', 'Local_Time')

<span class="comments">;noFilter:</span>

    regionOptions = $
        obj_new('SpdfRegionOptions', $
            /spacecraft, /radialTracedFootpoint, $
            /northBTracedFootpoint, /southBTracedFootpoint)

    valueOptions = $
        obj_new('SpdfValueOptions', $
            /radialDistance, /bFieldStrength, $
            /dipoleLValue, /dipoleInvLat)

    distanceFromOptions = $
        obj_new('SpdfDistanceFromOptions', $
            /neutralSheet, /bowShock, /mPause, /bGseXYZ)

    bFieldTraceOptions = objarr(2)

    bFieldTraceOptions[0] = $
        obj_new('SpdfBFieldTraceOptions', $
            coordinateSystem = 'Geo', $
            hemisphere = 'North', $
            /footpointLatitude, /footpointLongitude, /fieldLineLength)

    bFieldTraceOptions[1] = $
        obj_new('SpdfBFieldTraceOptions', $
            coordinateSystem = 'Geo', $
            hemisphere = 'South', $
            /footpointLatitude, /footpointLongitude, /fieldLineLength)

    outputOptions = $
        obj_new('SpdfOutputOptions', $
            coordinateOptions, $
            /allLocationFilters, $
            regionOptions = regionOptions, $
            valueOptions = valueOptions, $
            distanceFromOptions = distanceFromOptions, $
            minMaxPoints = 2, $
            bFieldTraceOptions = bFieldTraceOptions)

    bFieldModel = obj_new('SpdfTsyganenko96BFieldModel')

    <span class="comments">;</span>
    <span class="comments">; The presence of SpdfFormatOptions in the SpdfSscDataRequest</span>
    <span class="comments">; will result in a CDF or listing file being created instead</span>
    <span class="comments">; of the values being returned directly into IDL variables.</span>
    <span class="comments">;</span>
    formatOptions = $
        obj_new('SpdfFormatOptions', cdf=0b)

    locationRequest = $
        obj_new('SpdfSscDataRequest', $
            timeInterval, $
            sats, $
            outputOptions, $
            description  = 'Simple locator request.', $
            bFieldModel = bFieldModel)
<span class="comments">;            bFieldModel = bFieldModel, $</span>
<span class="comments">;            formatOptions = formatOptions)</span>

    locations = $
        ssc->getLocations( $
            locationRequest, $
            httpErrorReporter = errReporter)

    if ~obj_valid(locations) then begin

        print, 'getLocations returned an invalid object'

        return
    endif

    statusCode = locations->getStatusCode()

    if statusCode eq 'Error' then begin

        print, 'status: ', statusCode
        subCode = locations->getStatusSubCode()
        print, 'statusSubCode: ', subCode
        statusText = locations->getStatusText()
        print, 'statusText: ', statusText
    endif

    if obj_isa(locations, 'SpdfSscDataResult') then begin

        SpdfPrintDataResult, locations
    endif else begin  <span class="comments">; SpdfSscFileResult</span>

        SpdfPrintFileResult, locations
    endelse

    obj_destroy, locations
    obj_destroy, locationRequest
    obj_destroy, formatOptions
    obj_destroy, bFieldModel
    obj_destroy, outputOptions
    for i = 0, n_elements(bFieldTraceOptions) - 1 do $
        obj_destroy, bFieldTraceOptions[i]
    obj_destroy, distanceFromOptions
    obj_destroy, valueOptions
    obj_destroy, regionOptions
    for i = 0, n_elements(coordinateOptions) - 1 do $
        obj_destroy, coordinateOptions[i]
    obj_destroy, locationFilter
    for i = 0, n_elements(sats) -  1 do obj_destroy, sats[i]
    obj_destroy, timeInterval
    obj_destroy, errReporter
    obj_destroy, ssc
end

</code>
    </div>
  </body>
</html>